# London Bike-Sharing Demand Forecasting & System Dynamics Analysis

## Overview
This repository contains a professional portfolio analysis of the London bike-sharing system, demonstrating an end-to-end workflow from data acquisition and cleaning to advanced forecasting and system dynamics modeling. The project leverages:

- **Python (Pandas, Kaggle API)** for automated data extraction, transformation, and feature engineering.
- **Tableau** (scripts not included) for interactive dashboard development, enabling dynamic exploration of ridership trends, weather impacts, and demand patterns.
- **Statistical Forecasting** (seasonal decomposition, SARIMA) to predict daily ridership volumes with high accuracy.
- **System Dynamics** simulation to evaluate operational policies such as fleet expansion and docking infrastructure investments, identifying feedback delays and capacity saturation points.

All code and supporting artifacts are organized for easy navigation and reproduction of results. This case study is designed to inform data-driven decision-making for operations planning and strategic investment in urban bike-sharing programs.

---

## Repository Structure
```
London-Bike-Sharing-Analysis/
│
├─ data_pipeline.py            # Data acquisition, cleaning, and export to Excel
├─ forecast_analysis.py        # Time-series decomposition and SARIMA forecasting
├─ sd_model.py                 # System dynamics simulation of policies
│
├─ London_bikes_final.xlsx     # Cleaned dataset output (generated by data_pipeline.py)
├─ seasonal_decomposition.png  # Output from forecast_analysis.py
├─ forecast_vs_actual.png      # Output from forecast_analysis.py
├─ sarima_model.pkl            # Serialized SARIMA model
├─ sd_simulation_results.csv   # Results from sd_model.py
├─ sd_simulation_stocks.png    # Output from sd_model.py
│
├─ diagrams/                   # Folder containing System Dynamics diagrams
│   ├─ CLD_London_Bike_Sharing.png    # Causal Loop Diagram illustrating feedback loops
│   └─ Stock_Flow_Model.pdf            # Detailed stock-and-flow schematic
│
└─ README.md                 # Project overview and instructions (this file)
```

---

## Scripts
Below is a description of each primary Python script in this repository. All scripts assume you have the necessary Python dependencies installed (see **Getting Started**).

1. **`data_pipeline.py`**
   - **Purpose:** Automates the end-to-end data pipeline:
     1. Downloads the raw London bike-sharing dataset via the Kaggle API.
     2. Extracts and reads the CSV into a Pandas DataFrame.
     3. Renames columns for clarity and performs feature engineering (e.g., converting timestamps, mapping categorical codes, computing humidity fractions).
     4. Exports the cleaned dataset to `London_bikes_final.xlsx` for downstream use (Tableau and forecasting).
   - **Key Outputs:**
     - `London_bikes_final.xlsx` (cleaned dataset)

2. **`forecast_analysis.py`**
   - **Purpose:** Conducts time-series analysis and forecasting:
     1. Loads `London_bikes_final.xlsx` and aggregates hourly ridership into daily totals.
     2. Performs seasonal-trend decomposition (weekly seasonal cycle) to isolate trend and residual components.
     3. Uses `pmdarima.auto_arima` to identify optimal SARIMA parameters for forecasting daily ridership.
     4. Fits a SARIMA model on historical data (excluding the last 30 days), then forecasts the final 30 days.
     5. Evaluates forecast accuracy using MAPE (Mean Absolute Percentage Error) and RMSE (Root Mean Squared Error).
     6. Generates and saves two plots: `seasonal_decomposition.png` and `forecast_vs_actual.png`.
     7. Serializes the fitted SARIMA model to `sarima_model.pkl` for future reuse.
   - **Key Outputs:**
     - `seasonal_decomposition.png` (decomposition plot)
     - `forecast_vs_actual.png` (actual vs. forecast comparison)
     - `sarima_model.pkl` (serialized SARIMA model file)

3. **`sd_model.py`**
   - **Purpose:** Implements a System Dynamics simulation of the bike-sharing ecosystem:
     1. Defines stocks: Available Bikes (AB), In-Use Bikes (UB), and Bikes Under Maintenance (BM).
     2. Defines flows: Rent_Rate, Return_Rate, Maintenance_Rate, Repair_Rate, and Rebalance_Rate.
     3. Simulates hourly dynamics over a 30-day period under two policy scenarios:
        - **Fleet Expansion:** 20% increase in total bike count.
        - **Infrastructure Investment:** 50 additional docking stations (capacity does not directly increase redistribution capacity but affects station saturation).  
     4. Computes the evolution of stock variables each hour, ensuring non-negative values.
     5. Saves simulation outputs to `sd_simulation_results.csv` and a plot of stock trajectories to `sd_simulation_stocks.png`.
   - **Key Outputs:**
     - `sd_simulation_results.csv` (hourly stock values)  
     - `sd_simulation_stocks.png` (plot of stock levels over time)  

---

## System Dynamics Diagrams
Visual models that complement the `sd_model.py` simulation are provided in the `diagrams/` folder:

- **`diagrams/CLD_London_Bike_Sharing.png`** – Causal Loop Diagram illustrating the system’s reinforcing and balancing feedback loops. For example:
  - Reinforcing Loop (R1): “Weather → Demand → Availability → Service Quality → Demand.”
  - Balancing Loop (B1): “Demand → Inventory Depletion → Redistribution Effort → Inventory Replenishment.”

- **`diagrams/Stock_Flow_Model.pdf`** – Detailed stock-and-flow schematic showing stocks (Available Bikes, In-Use Bikes, Under Maintenance) and flows (Rent, Return, Maintenance, Repair, Redistribution). The PDF annotates flow equations and parameter values used in simulation.

These diagrams help visualize phenomena such as weather-induced demand elasticity and capacity saturation thresholds.

---

## Getting Started
To reproduce the entire analysis locally, follow these steps:

### Prerequisites
- **Python 3.7+** installed on your machine.  
- **pip** (Python package manager) available.  
- **Kaggle API token** (`kaggle.json`) configured in `~/.kaggle/` or environment variables (for `data_pipeline.py`).  
- **Git** (optional, for cloning the repository).  

### Install Dependencies
Create a virtual environment (recommended) and install required Python packages:

```bash
# 1. (Optional) Create and activate a virtual environment
python3 -m venv venv
source venv/bin/activate        # macOS/Linux
env\Scripts\activate         # Windows

# 2. Install dependencies
pip install pandas numpy statsmodels pmdarima matplotlib kaggle openpyxl
```

### Clone or Download the Repository
If you have Git:

```bash
git clone https://github.com/SayedAliMortazavian/Git-Hub-Repo.git
cd Git-Hub-Repo/Data-Analytic-and-Decision-Science
```

Alternatively, download the ZIP from GitHub and extract it to a local folder.

---

## Usage: Running the Scripts
### 1. Data Pipeline
```bash
python data_pipeline.py
```
- **Result:** Downloads the London bike-sharing dataset, cleans and transforms it, then writes `London_bikes_final.xlsx` in the current directory.

### 2. Forecast Analysis
```bash
python forecast_analysis.py
```
- **Result:** Reads `London_bikes_final.xlsx`, performs seasonal decomposition and SARIMA forecasting, and saves:
  - `seasonal_decomposition.png`
  - `forecast_vs_actual.png`
  - `sarima_model.pkl` (serialized model)

### 3. System Dynamics Simulation
```bash
python sd_model.py
```
- **Result:** Simulates a 30-day System Dynamics model under fleet-expansion and infrastructure scenarios. Outputs:
  - `sd_simulation_results.csv` (hourly stock levels)  
  - `sd_simulation_stocks.png` (plot of Available Bikes, In-Use Bikes, Under Maintenance over 720 hours)

---

## Interpreting Results
1. **`London_bikes_final.xlsx`** – Use this cleaned dataset in Tableau to replicate the interactive dashboard.  
2. **Forecast Plots** (`seasonal_decomposition.png`, `forecast_vs_actual.png`) – Inspect how well the SARIMA model captures seasonal patterns and out-of-sample behavior.  
3. **`sd_simulation_results.csv`** – Analyze hourly stock data to see how Available, In-Use, and Under Maintenance bikes evolve under each policy scenario.  
4. **`sd_simulation_stocks.png`** – Visualize the trajectory of bike stocks, identifying stabilization points, oscillations, and saturation effects.

---

## Contributions
- **Sayed Ali Mortazavian** – Designed the data pipeline, conducted forecasting analysis, developed the System Dynamics model, and authored documentation.

If you find this repository useful, feel free to connect or cite it in your own work!

---

## License
This project is released under the MIT License. See [LICENSE](LICENSE) for details.

